[gd_scene format=3 uid="uid://bsj2m1jhx8b4l"]

[ext_resource type="Script" uid="uid://cywxbsbvsaka6" path="res://Main.cs" id="1_0xm2m"]
[ext_resource type="PackedScene" uid="uid://coim6fdt86gu8" path="res://scenes/camera_controller.tscn" id="2_0xm2m"]
[ext_resource type="Script" uid="uid://b1h881bnaxfu1" path="res://scripts/tracks/Track.cs" id="3_1bvp3"]
[ext_resource type="PackedScene" uid="uid://d38phvi2cgoye" path="res://scenes/tracks/track_segment.tscn" id="3_lquwl"]
[ext_resource type="Script" uid="uid://dlpa5obf7cd0w" path="res://scripts/tracks/data/TrackNodeData.cs" id="5_efxa6"]
[ext_resource type="Script" uid="uid://cx4112x50xprk" path="res://scripts/tracks/TrackIsolator.cs" id="5_lquwl"]
[ext_resource type="Script" uid="uid://b15yvw4uofycm" path="res://scripts/tracks/TrackSwitch.cs" id="6_5vw27"]
[ext_resource type="Script" uid="uid://d3c2or76iytl1" path="res://scripts/train/Train.cs" id="6_272bh"]
[ext_resource type="Script" uid="uid://16mgebho3rd5" path="res://scripts/tracks/data/TrackData.cs" id="6_dg77c"]
[ext_resource type="Texture2D" uid="uid://djuh3tra4ijeq" path="res://assets/sprites/circle.png" id="8_5vw27"]
[ext_resource type="Script" uid="uid://yslvcibqqiko" path="res://scripts/interactions/Interactions.cs" id="9_kek77"]

[sub_resource type="Resource" id="Resource_dg77c"]
script = ExtResource("5_efxa6")
Id = 2
Position = Vector2(17, -30)
Links = Array[int]([11])

[sub_resource type="Resource" id="Resource_w48qg"]
script = ExtResource("5_efxa6")
Id = 4
Position = Vector2(17, -94)
Links = Array[int]([10])

[sub_resource type="Resource" id="Resource_vivmo"]
script = ExtResource("5_efxa6")
Id = 10
Position = Vector2(289, -94)
Links = Array[int]([19, 18, 4])

[sub_resource type="Resource" id="Resource_2cqfq"]
script = ExtResource("5_efxa6")
Id = 11
Position = Vector2(337, -30)
Links = Array[int]([13, 17, 2])

[sub_resource type="Resource" id="Resource_yaehf"]
script = ExtResource("5_efxa6")
Id = 13
Position = Vector2(385, -62)
Links = Array[int]([15, 19, 11])

[sub_resource type="Resource" id="Resource_074og"]
script = ExtResource("5_efxa6")
Id = 15
Position = Vector2(529, -62)
Links = Array[int]([18, 16, 13])

[sub_resource type="Resource" id="Resource_cegan"]
script = ExtResource("5_efxa6")
Id = 16
Position = Vector2(625, -62)
Links = Array[int]([15, 17])

[sub_resource type="Resource" id="Resource_82xsv"]
script = ExtResource("5_efxa6")
Id = 17
Position = Vector2(673, -30)
Links = Array[int]([16, 11, 31])

[sub_resource type="Resource" id="Resource_getpj"]
script = ExtResource("5_efxa6")
Id = 18
Position = Vector2(593, -94)
Links = Array[int]([15, 20, 10])

[sub_resource type="Resource" id="Resource_d13ii"]
script = ExtResource("5_efxa6")
Id = 19
Position = Vector2(337, -62)
Links = Array[int]([13, 10])

[sub_resource type="Resource" id="Resource_1u8w0"]
script = ExtResource("5_efxa6")
Id = 20
Position = Vector2(785, -94)
Links = Array[int]([18])

[sub_resource type="Resource" id="Resource_xuqvo"]
script = ExtResource("5_efxa6")
Id = 31
Position = Vector2(897, -30)
Links = Array[int]([17])

[sub_resource type="Resource" id="Resource_ryguw"]
script = ExtResource("6_dg77c")
_nodes = Dictionary[int, ExtResource("5_efxa6")]({
2: SubResource("Resource_dg77c"),
4: SubResource("Resource_w48qg"),
10: SubResource("Resource_vivmo"),
11: SubResource("Resource_2cqfq"),
13: SubResource("Resource_yaehf"),
15: SubResource("Resource_074og"),
16: SubResource("Resource_cegan"),
17: SubResource("Resource_82xsv"),
18: SubResource("Resource_getpj"),
19: SubResource("Resource_d13ii"),
20: SubResource("Resource_1u8w0"),
31: SubResource("Resource_xuqvo")
})
metadata/_custom_type_script = "uid://16mgebho3rd5"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ycdy4"]
resource_local_to_scene = true
size = Vector2(91.867004, 21.325)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_w48qg"]
resource_local_to_scene = true
size = Vector2(301, 20.62)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vivmo"]
resource_local_to_scene = true
size = Vector2(91.867004, 20.62)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2cqfq"]
resource_local_to_scene = true
size = Vector2(80.622574, 20.62)

[sub_resource type="CircleShape2D" id="CircleShape2D_lquwl"]
radius = 15.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yaehf"]
resource_local_to_scene = true
size = Vector2(56, 20.62)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_074og"]
resource_local_to_scene = true
size = Vector2(62.936478, 20.62)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cegan"]
resource_local_to_scene = true
size = Vector2(68, 20.62)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_5vw27"]
load_path = "res://.godot/imported/circle.png-5d399e40d8f71a91c414653a74d2346b.ctex"

[node name="Main" type="Node" unique_id=2111924343 node_paths=PackedStringArray("track", "segment", "train")]
script = ExtResource("1_0xm2m")
track = NodePath("Track")
segment = NodePath("Track/TrackSegment4")
train = NodePath("Train")

[node name="Interactions" type="Node" parent="." unique_id=137138085]
script = ExtResource("9_kek77")

[node name="CameraController" parent="." unique_id=1151989516 instance=ExtResource("2_0xm2m")]

[node name="Track" type="Node2D" parent="." unique_id=1493153376]
position = Vector2(-1, -2)
script = ExtResource("3_1bvp3")
Data = SubResource("Resource_ryguw")

[node name="TrackSegment1" parent="Track" unique_id=506896450 instance=ExtResource("3_lquwl")]
visible = false
position = Vector2(108, -91)
SegmentWidth = 21.325

[node name="CollisionShape2D" parent="Track/TrackSegment1" index="1" unique_id=822692767]
rotation = -3.1415076
shape = SubResource("RectangleShape2D_ycdy4")

[node name="ConnectionA" parent="Track/TrackSegment1" index="2" unique_id=207775042]
position = Vector2(45.933502, 0.00390625)

[node name="ConnectionB" parent="Track/TrackSegment1" index="3" unique_id=1570309833]
position = Vector2(-45.933502, -0.00390625)

[node name="Line2D" parent="Track/TrackSegment1" index="4" unique_id=50280442]
points = PackedVector2Array(45.933502, 0.00390625, -45.933502, -0.00390625)

[node name="TrackSegment4" parent="Track" unique_id=1297777188 instance=ExtResource("3_lquwl")]
visible = false
position = Vector2(379, -59)

[node name="CollisionShape2D" parent="Track/TrackSegment4" index="1" unique_id=822692767]
rotation = -3.1415925
shape = SubResource("RectangleShape2D_w48qg")

[node name="ConnectionA" parent="Track/TrackSegment4" index="2" unique_id=207775042]
position = Vector2(150.5, 0)

[node name="ConnectionB" parent="Track/TrackSegment4" index="3" unique_id=1570309833]
position = Vector2(-151, 0)

[node name="Line2D" parent="Track/TrackSegment4" index="4" unique_id=50280442]
points = PackedVector2Array(150.5, 0, -150.5, 0)

[node name="TrackSegment3" parent="Track" unique_id=1452578658 instance=ExtResource("3_lquwl")]
visible = false
position = Vector2(86, -135)

[node name="CollisionShape2D" parent="Track/TrackSegment3" index="1" unique_id=822692767]
rotation = -3.1415076
shape = SubResource("RectangleShape2D_vivmo")

[node name="ConnectionA" parent="Track/TrackSegment3" index="2" unique_id=207775042]
position = Vector2(45.933502, 0.00390625)

[node name="ConnectionB" parent="Track/TrackSegment3" index="3" unique_id=1570309833]
position = Vector2(-47, 0)

[node name="Line2D" parent="Track/TrackSegment3" index="4" unique_id=50280442]
points = PackedVector2Array(45.933502, 0.00390625, -45.933502, -0.00390625)

[node name="TrackSegment2" parent="Track" unique_id=996153845 instance=ExtResource("3_lquwl")]
visible = false
position = Vector2(190.9335, -74.99609)

[node name="CollisionShape2D" parent="Track/TrackSegment2" index="1" unique_id=822692767]
rotation = -2.7334435
shape = SubResource("RectangleShape2D_2cqfq")

[node name="ConnectionA" parent="Track/TrackSegment2" index="2" unique_id=207775042]
position = Vector2(37.066498, 15.996094)

[node name="ConnectionB" parent="Track/TrackSegment2" index="3" unique_id=1570309833]
position = Vector2(-37, -16)

[node name="Line2D" parent="Track/TrackSegment2" index="4" unique_id=50280442]
points = PackedVector2Array(37, 16, -37, -16)

[node name="TrackIsolator" type="Marker2D" parent="Track" unique_id=808338418]
visible = false
position = Vector2(62, -91)
script = ExtResource("5_lquwl")

[node name="Switch" type="Area2D" parent="Track" unique_id=158775372 node_paths=PackedStringArray("IdText", "StateText", "Indicator")]
visible = false
position = Vector2(-6, -91)
script = ExtResource("6_5vw27")
IdText = NodePath("Indicator/Fill/IdLabel")
StateText = NodePath("Indicator/Fill/StateLabel")
Indicator = NodePath("Indicator")
InteractPriority = -10

[node name="CollisionShape2D" type="CollisionShape2D" parent="Track/Switch" unique_id=662039015]
z_index = 10
shape = SubResource("CircleShape2D_lquwl")

[node name="InSegment" parent="Track/Switch" unique_id=356207709 instance=ExtResource("3_lquwl")]
position = Vector2(-28, 0)

[node name="CollisionShape2D" parent="Track/Switch/InSegment" index="1" unique_id=822692767]
rotation = -3.1415925
shape = SubResource("RectangleShape2D_yaehf")

[node name="ConnectionA" parent="Track/Switch/InSegment" index="2" unique_id=207775042]
position = Vector2(28, 0)

[node name="ConnectionB" parent="Track/Switch/InSegment" index="3" unique_id=1570309833]
position = Vector2(-28, 0)

[node name="Line2D" parent="Track/Switch/InSegment" index="4" unique_id=50280442]
points = PackedVector2Array(28, 0, -28, 0)

[node name="OutSegmentB" parent="Track/Switch" unique_id=885460486 instance=ExtResource("3_lquwl")]
position = Vector2(22.5, -22)

[node name="CollisionShape2D" parent="Track/Switch/OutSegmentB" index="1" unique_id=822692767]
rotation = -0.7741627
shape = SubResource("RectangleShape2D_074og")

[node name="ConnectionA" parent="Track/Switch/OutSegmentB" index="2" unique_id=207775042]
position = Vector2(-22.5, 22)

[node name="ConnectionB" parent="Track/Switch/OutSegmentB" index="3" unique_id=1570309833]
position = Vector2(22.5, -22)

[node name="Line2D" parent="Track/Switch/OutSegmentB" index="4" unique_id=50280442]
points = PackedVector2Array(-22.5, 22, 22.5, -22)

[node name="OutSegmentA" parent="Track/Switch" unique_id=1575990800 instance=ExtResource("3_lquwl")]
position = Vector2(34, 0)

[node name="CollisionShape2D" parent="Track/Switch/OutSegmentA" index="1" unique_id=822692767]
rotation = 0.0
shape = SubResource("RectangleShape2D_cegan")

[node name="ConnectionA" parent="Track/Switch/OutSegmentA" index="2" unique_id=207775042]
position = Vector2(-34, 0)

[node name="ConnectionB" parent="Track/Switch/OutSegmentA" index="3" unique_id=1570309833]
position = Vector2(34, 0)

[node name="Line2D" parent="Track/Switch/OutSegmentA" index="4" unique_id=50280442]
points = PackedVector2Array(-34, 0, 34, 0)

[node name="Indicator" type="Sprite2D" parent="Track/Switch" unique_id=1256335409]
self_modulate = Color(1, 1, 0.10980392, 1)
scale = Vector2(0.1, 0.1)
texture = ExtResource("8_5vw27")

[node name="Fill" type="Sprite2D" parent="Track/Switch/Indicator" unique_id=1173400862]
scale = Vector2(0.6, 0.6)
texture = SubResource("CompressedTexture2D_5vw27")

[node name="StateLabel" type="Label" parent="Track/Switch/Indicator/Fill" unique_id=2103354441]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -152.0
offset_top = -152.0
offset_right = -152.0
offset_bottom = -152.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 128
text = "D"
horizontal_alignment = 1
vertical_alignment = 1

[node name="IdLabel" type="Label" parent="Track/Switch/Indicator/Fill" unique_id=648851354]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -152.0
offset_top = -152.0
offset_right = -152.0
offset_bottom = -152.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 72
text = "100"
horizontal_alignment = 1

[node name="Train" type="Node2D" parent="." unique_id=1558786846 node_paths=PackedStringArray("LeadVisual", "RearVisual")]
position = Vector2(50, -53)
script = ExtResource("6_272bh")
TrainLength = 200.0
LeadVisual = NodePath("Lead")
RearVisual = NodePath("Rear")

[node name="Lead" type="Sprite2D" parent="Train" unique_id=406436698]
modulate = Color(0, 0.20392157, 0.84313726, 1)
scale = Vector2(0.05, 0.05)
texture = ExtResource("8_5vw27")

[node name="Rear" type="Sprite2D" parent="Train" unique_id=251388624]
modulate = Color(0.9211696, 0.34046587, 0.25685716, 1)
position = Vector2(31.999998, -0.99999994)
scale = Vector2(0.05, 0.05)
texture = ExtResource("8_5vw27")

[node name="Node2D" type="Node2D" parent="." unique_id=1993713351]
position = Vector2(0, -200)

[node name="Marker2D" type="Marker2D" parent="." unique_id=2067568665]
position = Vector2(201, 93)

[editable path="Track/TrackSegment1"]
[editable path="Track/TrackSegment4"]
[editable path="Track/TrackSegment3"]
[editable path="Track/TrackSegment2"]
[editable path="Track/Switch/InSegment"]
[editable path="Track/Switch/OutSegmentB"]
[editable path="Track/Switch/OutSegmentA"]
